@model IEnumerable<GCCSI_CO2RE.Models.InherentInterestData>

@{
    ViewBag.Title = "Inherent Interest Data";
}

<div id="yearAndCreateInInt" style="display:flex;align-items: flex-end; flex-direction:column;">
    <div style="display:flex; flex-flow:row; align-items:center ">
        <div id="createRowDiv" class="my-2 d-flex justify-content-end" style="padding-right:10px">
            @Html.ActionLink("Create New", "AddEditInherentInterest", null, new { @class = "createDialogButton btn btn-primary pi-draggable" })
        </div>
        <div>
            <div class="d-flex justify-content-end align-items-center">
                <div style="font-size:20pt;">
                    <b>
                        Year:&nbsp;
                    </b>
                </div>
                <select id="yearFilterInInt" class="dropdownoption">
                    <option value="All">All</option>
                    @foreach (var year in ViewBag.PossibleYears)
                    {
                        <option value="@year.YearName">@year.YearName</option>
                    }
                </select>
            </div>
        </div>
    </div>
</div>


<div id="tabs">
    <ul class="nav nav-tabs" id="prodTabs">
        <li class="nav-item"><a id="oilTab" class="nav-link" href="#tab_oil" data-toggle="tab">Oil</a></li>
        <li class="nav-item"><a id="gasTab" class="nav-link" href="#tab_gas" data-toggle="tab">Gas</a></li>
        <li class="nav-item"><a id="coalTab" class="nav-link" href="#tab_coal" data-toggle="tab">Coal</a></li>
    </ul>
    <div class="tab-content">
        <div id="tab_oil" class="tab-pane">

            <div class="datatable-wide" style="padding-left: 0; padding-right: 0">
                <br />
                <div style="width:100%">
                    <table id="interestOilGrid" class="table table-striped table-bordered dt-responsive wrap" cellspacing="0">
                        <thead style="font-size:12px">
                            <tr>
                                <th>
                                    @Html.DisplayNameFor(model => model.Country.CountryName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Region.RegionName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.OilProduction)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.OilConsumption)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Summary)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Note)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Year.YearName)
                                </th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Country.CountryName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Region.RegionName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.OilProduction)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.OilConsumption)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Summary)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Note)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Year.YearName)
                                </td>
                                <td style="white-space:nowrap">
                                    @Html.ActionLink("Edit", "AddEditInherentInterest", new { id = item.InherentInterestID }, new { @class = "editDialog" }) |
                                    @Html.ActionLink("Details", "InherentInterestDetails", new { id = item.InherentInterestID }, new { @class = "detailsDialog" }) |
                                    @Html.ActionLink("Delete", "InherentInterestDelete", new { id = item.InherentInterestID }, new { @class = "confirmDialog" })
                                </td>
                            </tr>
                        }

                    </table>
                </div>
            </div>

        </div>
        <div id="tab_gas" class="tab-pane">
            <div class="datatable-wide" style="padding-left: 0; padding-right: 0">
                <br />
                <div style="width:100%">
                    <table id="interestGasGrid" class="table table-striped table-bordered dt-responsive wrap" cellspacing="0">
                        <thead style="font-size:12px">
                            <tr>
                                <th>
                                    @Html.DisplayNameFor(model => model.Country.CountryName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Region.RegionName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.GasProduction)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.GasConsumption)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Summary)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Note)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Year.YearName)
                                </th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Country.CountryName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Region.RegionName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.GasProduction)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.GasConsumption)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Summary)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Note)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Year.YearName)
                                </td>
                                <td style="white-space:nowrap">
                                    @Html.ActionLink("Edit", "AddEditInherentInterest", new { id = item.InherentInterestID }, new { @class = "editDialog" }) |
                                    @Html.ActionLink("Details", "InherentInterestDetails", new { id = item.InherentInterestID }, new { @class = "detailsDialog" }) |
                                    @Html.ActionLink("Delete", "InherentInterestDelete", new { id = item.InherentInterestID }, new { @class = "confirmDialog" })
                                </td>
                            </tr>
                        }

                    </table>
                </div>
            </div>

        </div>
        <div id="tab_coal" class="tab-pane">
            <div class="datatable-wide" style="padding-left: 0; padding-right: 0">
                <br />
                <table id="interestCoalGrid" class="table table-striped table-bordered dt-responsive wrap" cellspacing="0">
                    <thead style="font-size:12px">
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.Country.CountryName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Region.RegionName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CoalProduction)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CoalConsumption)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Summary)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Note)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Year.YearName)
                            </th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Country.CountryName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Region.RegionName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CoalProduction)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CoalConsumption)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Summary)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Note)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Year.YearName)
                            </td>
                            <td style="white-space:nowrap">
                                @Html.ActionLink("Edit", "AddEditInherentInterest", new { id = item.InherentInterestID }, new { @class = "editDialog" }) |
                                @Html.ActionLink("Details", "InherentInterestDetails", new { id = item.InherentInterestID }, new { @class = "detailsDialog" }) |
                                @Html.ActionLink("Delete", "InherentInterestDelete", new { id = item.InherentInterestID }, new { @class = "confirmDialog" })
                            </td>
                        </tr>
                    }

                </table>

            </div>
        </div>
    </div>
</div>



@if (Request.IsAuthenticated)
{
    if (User.IsInRole("Admin"))
    {
        @Scripts.Render("~/Scripts/dataEntryShared.js")

        <script>

    $('#interestOilGrid').DataTable({
        responsive: true,
        searching: true,
        autoWidth: false
    });
    $('#interestGasGrid').DataTable({
        responsive: true,
        searching: true,
        autoWidth: false
    });
    $('#interestCoalGrid').DataTable({
        responsive: true,
        searching: true,
        autoWidth: false
    });

    $(document).ready(function () {
        //Assurance to hide column.
        var oilTable = $('#interestOilGrid').DataTable();
        var oilYearcolumn = oilTable.column(6);
        oilYearcolumn.visible(false);
        var gasTable = $('#interestGasGrid').DataTable();
        var gasYearcolumn = gasTable.column(6);
        gasYearcolumn.visible(false);
        var coalTable = $('#interestCoalGrid').DataTable();
        var coalYearcolumn = coalTable.column(6);
        coalYearcolumn.visible(false);

        //Add on change function.
        $("#yearFilterInInt").change(function () {
            //On the user change of year filter we want to update the table.
            var yearWanted = document.getElementById("yearFilterInInt").value;
            var oilTable = $('#interestOilGrid').dataTable();
            var gasTable = $('#interestGasGrid').dataTable();
            var coalTable = $('#interestCoalGrid').dataTable();
            if (yearWanted == "All") {
                oilTable.fnFilter("", 6, false);
                gasTable.fnFilter("", 6, false);
                coalTable.fnFilter("", 6, false);
            }
            else {
                oilTable.fnFilter(yearWanted, 6);
                gasTable.fnFilter(yearWanted, 6);
                coalTable.fnFilter(yearWanted, 6);
            }
        });

        //Once loaded choose All as default selection for the year filter.
        $("#yearFilterInInt").val("All");


    });
        </script>
    }
}

